{
  "variables": {
    "iso_checksum": null,
    "iso_url": null,

    "vm_ram_size_in_mb": "2048",
    "vm_name": null,
    "vm_switch_name": "internal_switch",

    "admin_username": "admin",
    "admin_password": "admin",

    "dir_config_user": null,
    "dir_scripts_user": null,
    "dir_cookbooks_user": null
  },
  "builders": [
    {
      "communicator": "winrm",
      "floppy_files": [],
      "generation": 2,
      "guest_additions_mode": "disable",
      "iso_checksum": "{{ user `iso_checksum` }}",
      "iso_checksum_type": "sha256",
      "iso_url": "{{ user `iso_url` }}",
      "ram_size": "{{ user `vm_ram_size_in_mb` }}",
      "secondary_iso_images": [
          "{{ user `dir_config_user` }}/unattend.iso"
      ],
      "shutdown_command": "C:/Windows/Panther/Unattend/packer_shutdown.bat",
      "shutdown_timeout": "15m",
      "switch_name": "{{ user `vm_switch_name` }}",
      "type": "hyperv-iso",
      "vm_name": "{{ user `vm_name` }}",
      "winrm_password": "{{ user `admin_password` }}",
      "winrm_timeout": "12h",
      "winrm_username": "{{ user `admin_username` }}"
    }
  ],
  "provisioners": [
    {
      "type": "powershell",
      "elevated_user": "{{user `admin_username`}}",
      "elevated_password": "{{user `admin_password`}}",
      "scripts": [
        "{{ user `dir_scripts_user` }}/Prepare-DotnetAssemblies.ps1",
        "{{ user `dir_scripts_user` }}/PrepareFor-DiskOptimization.ps1"
      ]
    }
  ]
}
